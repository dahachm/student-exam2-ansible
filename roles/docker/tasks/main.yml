---
# tasks file for roles/docker
- name: Install python, pip, docker
  apk:
    name:
        - python3
        - py3-pip
        - docker
    state: present

- name: Remove odd python libs for docker
  pip:
    name:
       - docker-py
       - docker
    state: absent

- name: Install Docker SDK for python (docker 4.4.4)
  pip: 
    name: docker==4.4.4
    state: present

- name: Start and enable docker
  service:
    name: docker
    enabled: yes
    state: started

- name: Create docker network
  docker_network:
    name: "{{ network_name }}"
    ipam_config:
      - subnet: 172.21.0.0/16
    state: present
    force: yes


